<div class=" noc-dialog" fxLayout="column" fxLayoutAlign="start stretch">
  <mat-toolbar class="noc-dialog-header mat-primary m-0">
    <mat-toolbar-row fxFlex fxLayout="row" fxLayoutAlign="start center">
      <span class="title dialog-title">
        Gene List </span>
      <span fxFlex></span>
      <button mat-stroked-button (click)="close()" class="noc-rounded-button noc-sm" aria-label="Close dialog">
        <mat-icon>close</mat-icon> Close
      </button>
    </mat-toolbar-row>
  </mat-toolbar>
  <div class="noc-dialog-content">
    <div class="h-100-p" name="geneFormGroup" [formGroup]="geneFormGroup" fxLayout="column"
      fxLayoutAlign="start stretch">
      <div class="w-100-p" fxLayout="row" fxLayoutAlign="start center">
        <mat-form-field fxFlex="40" appearance="outline">
          <mat-label>Gene Ids</mat-label>
          <textarea matInput formControlName="geneIds" placeholder="Gene Ids" rows="5"></textarea>
        </mat-form-field>
        <button (click)="loadGenes()" type="button" mat-raised-button color="primary">
          Load
        </button>
      </div>
      <div class="tabs-buttons">
        <button mat-button class="noc-sm" [class.active]="activeTab === 'matched'" (click)="setActiveTab('matched')">
          Matched Genes (<small>{{genes.length}}</small>)
        </button>
        <button mat-button class="noc-sm" [class.active]="activeTab === 'unmatched'"
          (click)="setActiveTab('unmatched')">
          Unmatched Genes (<small>{{nonMatchingGenes.length}}</small>)
        </button>
        <button mat-button class="noc-sm" [class.active]="activeTab === 'unmatchedList'"
          (click)="setActiveTab('unmatchedList')">Identifiers Not Found
          (<small>{{identifiersNotMatched.length}}</small>)</button>
      </div>

      <div class="tab-content h-100-p">
        <!-- Matched Genes -->
        <ng-container *ngIf="activeTab === 'matched'">
          <cdk-virtual-scroll-viewport itemSize="50" class="example-viewport">
            <div *cdkVirtualFor="let gene of genes" class="gene-row">
              <div class="gene-column">{{ gene.id }}</div>
              <div class="gene-column">{{ gene.geneSymbol }}</div>
              <div class="gene-column">{{ gene.label }}</div>
            </div>
          </cdk-virtual-scroll-viewport>
        </ng-container>

        <!-- Unmatched Genes -->
        <ng-container *ngIf="activeTab === 'unmatched'">
          <cdk-virtual-scroll-viewport itemSize="50" class="example-viewport">
            <div *cdkVirtualFor="let gene of nonMatchingGenes" class="gene-row">
              <div class="gene-column">{{ gene.id }}</div>
              <div class="gene-column">{{ gene.geneSymbol }}</div>
              <div class="gene-column">{{ gene.label }}</div>
            </div>
          </cdk-virtual-scroll-viewport>
        </ng-container>

        <!-- Unmatched Gene List -->
        <ng-container *ngIf="activeTab === 'unmatchedList'">
          <cdk-virtual-scroll-viewport itemSize="50" class="example-viewport">
            <div *cdkVirtualFor="let geneIdentifier of identifiersNotMatched" class="gene-row">
              <div class="gene-column">{{ geneIdentifier }}</div>
            </div>
          </cdk-virtual-scroll-viewport>
        </ng-container>
      </div>
    </div>
  </div>
  <div class="m-0 p-16 noc-dialog-footer" fxLayout="row" fxLayoutAlign="space-between center">
    <button (click)='close()' type="button" mat-raised-button color="" class="mr-8">
      Cancel</button>
    <button (click)="save()" type="button" mat-raised-button color="primary">
      Save
    </button>
  </div>
</div>