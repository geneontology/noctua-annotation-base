<div class="w-100-p h-100-p" fxLayout="row" fxLayoutAlign="start start">
  <div class="noc-sidemenu" fxLayout="column" fxLayoutAlign="start center">
    <button mat-icon-button (click)="toggleLeftDrawer(camTableService.leftPanel.diagramMenu)" matTooltip="Search"
      [matTooltipPosition]="'after'" [matTooltipShowDelay]="1500">
      <mat-icon> assignment </mat-icon>
    </button>
  </div>
  <mat-drawer-container class="w-100-p h-100-p" fxLayout="row" fxLayoutAlign="start start">
    <mat-drawer #leftDrawer class="noc-left-drawer" fxFlex="200px" mode="side" position="start">
      <div [ngSwitch]="camTableService.selectedLeftPanel.id" class="h-100-p">
        <noc-cam-form *ngSwitchCase="camTableService.panel.camForm.id"></noc-cam-form>
        <noc-diagram-menu *ngSwitchCase="camTableService.panel.diagramMenu.id"></noc-diagram-menu>
      </div>
    </mat-drawer>
    <mat-drawer-content class="cams-table" noctuaPerfectScrollbar>
      <div class="noc-cams-table-header w-100-p">
        <div fxFlex="80px">

        </div>
        <div fxFlex="150px">
          <p> Annotated Entity</p>
        </div>
        <div fxFlex="120px">
          <p>Relationship</p>
        </div>
        <div fxFlex="50px">
          <p>Asp</p>
        </div>
        <div fxFlex="150px">
          <p>Term</p>
        </div>
        <div fxFlex="120px">
          <p>Relationship Ext</p>
        </div>
        <div fxFlex="150px">
          <p>Extension</p>
        </div>
        <div fxFlex="150px">
          <p>Evidence</p>
        </div>
        <div fxFlex="120px">
          <p>Reference</p>
        </div>
        <div fxFlex="120px">
          <p>Evidence</p>
        </div>
        <div fxFlex="120px">
          <p>With</p>
        </div>
        <div fxFlex="120px">
          <p>Assigned By</p>
        </div>
      </div>
      <div>
        <div class="noc-cam-table-heading" fxLayout="row" fxLayoutAlign="start center">
          <div fxFlex="80px" (click)="$event.stopPropagation()">
            <button mat-icon-button (click)="toggleExpand(cam)" ckass="noc-button-small">
              <mat-icon *ngIf="!cam.expanded" class="s-16 fa fa-caret-right">
              </mat-icon>
              <mat-icon *ngIf="cam.expanded" class="s-12 mat-icon-rtl-mirror">
                signal_cellular_4_bar
              </mat-icon>
            </button>

            <!--      <button mat-icon-button [matMenuTriggerFor]="changeView">
              <mat-icon>
                apps
              </mat-icon>
            </button>
            <mat-menu #changeView="matMenu">
              <a *ngFor="let workbench of cam.model?.modelInfo.workbenches" href="{{workbench.url}}" target="_blank"
                mat-menu-item>
                {{workbench.label}}
              </a>
            </mat-menu> -->
          </div>
          <span class="grey-500-fg">Model: </span> {{cam.model?.title }}
        </div>
        <div class="noc-cam-table-body w-100-p h-100-p" fxLayout="row" fxLayoutAlign="start start">
          <div class="cams-table" fxFlex="">
            <mat-table class="w-100-p" #table [dataSource]="cam.camRow" matSort [@animateStagger]="{value:'50'}"
              noctuaPerfectScrollbar>
              <ng-container cdkColumnDef="expand">
                <mat-header-cell *cdkHeaderCellDef fxFlex="80px"></mat-header-cell>
                <mat-cell *cdkCellDef="let cam" fxFlex="80px" [style.padding-left]="cam.treeLevel * 20+'px'" (click)="$event.stopPropagation()">

                </mat-cell>
              </ng-container>
              <ng-container cdkColumnDef="annotatedEntity">
                <mat-header-cell *cdkHeaderCellDef fxFlex="150px">Annotated Entity</mat-header-cell>
                <mat-cell *cdkCellDef="let cam" fxFlex="150px">
                  <p class="text-truncate">{{cam.annotatedEntity?.label}}</p>
                </mat-cell>
              </ng-container>
              <ng-container cdkColumnDef="relationship">
                <mat-header-cell *cdkHeaderCellDef fxFlex="120px">Relationship</mat-header-cell>
                <mat-cell *cdkCellDef="let cam" fxFlex="120px">
                  <p class="text-truncate">{{cam.relationship}}</p>
                </mat-cell>
              </ng-container>
              <ng-container cdkColumnDef="aspect">
                <mat-header-cell *cdkHeaderCellDef fxFlex="50px">Asp</mat-header-cell>
                <mat-cell *cdkCellDef="let cam" fxFlex="50px">
                  <p class="text-truncate">{{cam.aspect}}</p>
                </mat-cell>
              </ng-container>
              <ng-container cdkColumnDef="term">
                <mat-header-cell *cdkHeaderCellDef fxFlex="150px">Term</mat-header-cell>
                <mat-cell *cdkCellDef="let cam" fxFlex="150px">
                  <p class="text-truncate">{{cam.term?.label}}</p>
                </mat-cell>
              </ng-container>
              <ng-container cdkColumnDef="relationshipExt">
                <mat-header-cell *cdkHeaderCellDef fxFlex="120px">Relationship (ext)</mat-header-cell>
                <mat-cell *cdkCellDef="let cam" fxFlex="120px">
                  <p class="text-truncate">{{cam.relationshipExt}}</p>
                </mat-cell>
              </ng-container>
              <ng-container cdkColumnDef="extension">
                <mat-header-cell *cdkHeaderCellDef fxFlex="150px">Extension</mat-header-cell>
                <mat-cell *cdkCellDef="let cam" fxFlex="150px">
                  <p class="text-truncate">{{cam.extension?.label}}</p>
                </mat-cell>
              </ng-container>
              <ng-container cdkColumnDef="evidence">
                <mat-header-cell *cdkHeaderCellDef fxFlex="150px">Evidence</mat-header-cell>
                <mat-cell *cdkCellDef="let cam" fxFlex="150px">
                  <p class="text-truncate">{{cam.evidence?.label}}</p>
                </mat-cell>
              </ng-container>
              <ng-container cdkColumnDef="reference">
                <mat-header-cell *cdkHeaderCellDef fxFlex="150px">Reference</mat-header-cell>
                <mat-cell *cdkCellDef="let cam" fxFlex="150px">
                  <a href="{{cam.reference?.url}}" class="text-truncate" target="_blank">{{cam.reference?.label}}</a>
                </mat-cell>
              </ng-container>
              <ng-container cdkColumnDef="with">
                <mat-header-cell *cdkHeaderCellDef fxFlex="120px">With</mat-header-cell>
                <mat-cell *cdkCellDef="let cam" fxFlex="150px">
                  <p class="text-truncate">{{cam.with}}</p>
                </mat-cell>
              </ng-container>
              <ng-container cdkColumnDef="assignedBy">
                <mat-header-cell *cdkHeaderCellDef fxFlex="150px">Assigned By</mat-header-cell>
                <mat-cell *cdkCellDef="let cam" fxFlex="150px">
                  <a href="{{cam.assignedBy?.link?.url}}" class="text-truncate" target="_blank">{{cam.assignedBy?.link?.value}}</a>
                </mat-cell>
              </ng-container>
              <mat-header-row *cdkHeaderRowDef="displayedColumns"></mat-header-row>
              <mat-row *cdkRowDef="let cam; columns: displayedColumns;" class="cam" matRipple (click)="selectCam(cam)"></mat-row>
            </mat-table>
            <div *ngIf="cams?.length===0" class="noc-no-info">
              no results yet.
            </div>
          </div>
        </div>
      </div>
    </mat-drawer-content>
    <mat-drawer #rightDrawer class="noc-right-drawer" fxFlex="500px" noctuaPerfectScrollbar mode="side" position="end">
      <noc-cam-row>
      </noc-cam-row>
    </mat-drawer>
  </mat-drawer-container>
</div>
